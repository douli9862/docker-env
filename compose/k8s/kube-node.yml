kubelet:
  image: gcr.io/google_containers/hyperkube-amd64:v1.2.5
  privileged: true
  net: "host"
  pid: "host"
  command: >
    /hyperkube kubelet
    --allow-privileged=true
    --api-servers=http://${HOST_IP}:8080
    --cluster-dns=${K8S_DNS_SERVER_IP}
    --cluster-domain=${K8S_DNS_DOMAIN}
    --config=/etc/kubernetes/manifests
    --containerized
    --enable-debugging-handlers=true
    --hairpin-mode="promiscuous-bridge"
    --hostname-override=10.0.2.24
    --port=10250
    --v=2
  volumes:
    - /:/rootfs:ro
    - /sys:/sys:rw
    - /var/lib/docker:/var/lib/docker:rw
    - /var/lib/kubelet/:/var/lib/kubelet:rw
    # - /usr/bin/docker:/usr/bin/docker
    - /var/run:/var/run:rw
    - /etc/kubernetes/manifests:/etc/kubernetes/manifests

kube-proxy:
  image: gcr.io/google_containers/kube-proxy:v1.2.5
  privileged: true
  net: "host"
  pid: "host"
  command: >
    kube-proxy
    --master=http://${HOST_IP}:${K8S_APISERVER_PORT}
    --v=5
  volumes:
    - /var/run:/var/run
    - /var/log:/var/log
    - /usr/share/ca-certificates:/etc/ssl/certs
